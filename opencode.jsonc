{
  "$schema": "https://opencode.ai/config.json",

  "model": "anthropic/claude-sonnet-4-5",
  "small_model": "opencode/gpt-5-nano",

  "plugin": ["oh-my-opencode"],

  "instructions": [
    "AGENTS.md"
  ],
  "command": {
    "f-plan": {
      "template": "{env:OPENCODE_CONFIG_DIR}/command/planning/f-plan.md",
      "description": "Plan Cloudflare Workers projects with architectural guidance"
    },
    "f-triage": {
      "template": "{env:OPENCODE_CONFIG_DIR}/command/planning/f-triage.md",
      "description": "Triage findings and decisions to add to the Beads (bd) persistent task system"
    },
    "f-component": {
      "template": "{env:OPENCODE_CONFIG_DIR}/command/development/f-component.md",
      "description": "Create shadcn/ui component"
    },
    "f-test-gen": {
      "template": "{env:OPENCODE_CONFIG_DIR}/command/development/f-test-gen.md",
      "description": "Generate Playwright tests for a feature"
    },
    "f-commit": {
      "template": "{env:OPENCODE_CONFIG_DIR}/command/workflow/f-commit.md",
      "description": "Staged changes, generate commit message, and push"
    },
    "f-resolve-parallel": {
      "template": "{env:OPENCODE_CONFIG_DIR}/command/workflow/f-resolve-parallel.md",
      "description": "Resolve multiple tasks and issues in parallel"
    },
    "f-review": {
      "template": "{env:OPENCODE_CONFIG_DIR}/command/workflow/f-review.md",
      "description": "Comprehensive code review with swarm-based multi-agent analysis"
    },
    "f-analyze-repo": {
      "template": "{env:OPENCODE_CONFIG_DIR}/command/analysis/f-analyze-repo.md",
      "description": "Analyze external repositories to discover patterns for the f-stack"
    },
    "f-generate-command": {
      "template": "{env:OPENCODE_CONFIG_DIR}/command/analysis/f-generate-command.md",
      "description": "Generate new slash command"
    }
  },

  "formatter": {
    "prettier": {
      "command": ["npx", "prettier", "--write", "$FILE"],
      "extensions": [".js", ".ts", ".jsx", ".tsx", ".json", ".md", ".css"]
    }
  },

  "mcp": {
    "mgrep": {
      "type": "local",
      "command": ["mgrep", "mcp"],
      "enabled": true
    },
    "package-registry": {
      "type": "local",
      "command": ["npx", "-y", "package-registry-mcp"],
      "enabled": true
    }
  },

  "agent": {
    "plan": {
      "model": "anthropic/claude-opus-4-5"
    },
    "feedback-codifier": {
      "model": "anthropic/claude-opus-4-5",
      "temperature": 0.2,
      "description": "Learning engine - extracts and validates patterns from feedback"
    },
    "implementation-analyzer": {
      "model": "anthropic/claude-opus-4-5",
      "temperature": 0.3,
      "description": "Proactive pattern discovery from external repositories"
    }
  },

  "permission": {
    "edit": "allow",
    "bash": "allow",
    "webfetch": "allow",
    "doom_loop": "allow",
    "external_directory": "allow"
  }
}
